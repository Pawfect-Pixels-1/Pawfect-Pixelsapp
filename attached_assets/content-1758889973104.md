hCaptcha

hCaptcha

Afrikaans

Albanian

Amharic

Arabic

Armenian

Azerbaijani

Basque

Belarusian

Bengali

Bulgarian

Bosnian

Burmese

Catalan

Cebuano

Chinese

Chinese Simplified

Chinese Traditional

Corsican

Croatian

Czech

Danish

Dutch

English

Esperanto

Estonian

Finnish

French

Frisian

Gaelic

Galacian

Georgian

German

Greek

Gujurati

Haitian

Hausa

Hawaiian

Hebrew

Hindi

Hmong

Hungarian

Icelandic

Igbo

Indonesian

Irish

Italian

Japanese

Javanese

Kannada

Kazakh

Khmer

Kinyarwanda

Kirghiz

Korean

Kurdish

Lao

Latin

Latvian

Lithuanian

Luxembourgish

Macedonian

Malagasy

Malay

Malayalam

Maltese

Maori

Marathi

Mongolian

Nepali

Norwegian

Nyanja

Oriya

Persian

Polish

Portuguese (Brazil)

Portuguese (Portugal)

Pashto

Punjabi

Romanian

Russian

Samoan

Shona

Sindhi

Sinhalese

Serbian

Slovak

Slovenian

Somali

Southern Sotho

Spanish

Sundanese

Swahili

Swedish

Tagalog

Tajik

Tamil

Tatar

Teluga

Thai

Turkish

Turkmen

Uyghur

Ukrainian

Urdu

Uzbek

Vietnamese

Welsh

Xhosa

Yiddish

Yoruba

Zulu

EN

[Visit hcaptcha.com to learn more about the service and its accessibility options.](https://www.hcaptcha.com/what-is-hcaptcha-about?ref=b.stripecdn.com&utm_campaign=5034f7f0-a742-48aa-89e2-062ece60f0d6&utm_medium=challenge&hl=en "Visit hcaptcha.com to learn more about the service and its accessibility options.")

Please try again. ⚠️

Verify

[Skip to content](https://docs.stripe.com/customer-management/portal-deep-links#main-content)

Deep links and flows in the customer portal

[Create account](https://dashboard.stripe.com/register/billing) or [Sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fcustomer-management%2Fportal-deep-links)

[The Stripe Docs logo](https://docs.stripe.com/)

Search

`/`Ask AI

[Create account](https://dashboard.stripe.com/register/billing)

[Sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fcustomer-management%2Fportal-deep-links)

[Get started](https://docs.stripe.com/get-started)

[Payments](https://docs.stripe.com/payments)

[Revenue](https://docs.stripe.com/revenue)

[Platforms and marketplaces](https://docs.stripe.com/connect)

[Money management](https://docs.stripe.com/money-management)

[Developer resources](https://docs.stripe.com/development)

APIs & SDKs

Help

[Overview](https://docs.stripe.com/revenue)

Billing

[Overview](https://docs.stripe.com/billing) [About the Billing APIs](https://docs.stripe.com/billing/billing-apis)

Subscriptions

Invoicing

Usage-based billing

Quotes

Customer management

[Overview](https://docs.stripe.com/customer-management)

[Customers](https://docs.stripe.com/billing/customer)

[Customer invoice balance](https://docs.stripe.com/billing/customer/balance)

Customer portal

[Set up the no-code customer portal](https://docs.stripe.com/customer-management/activate-no-code-customer-portal)

[Set up the customer portal with the API](https://docs.stripe.com/customer-management/integrate-customer-portal)

[Configure the customer portal](https://docs.stripe.com/customer-management/configure-portal)

Deep links and flows in the customer portal

[Add a cancellation page to the customer portal](https://docs.stripe.com/customer-management/cancellation-page)

Billing with other products

Revenue recovery

Automations

Test your integration

Tax

[Overview](https://docs.stripe.com/tax)

Use Stripe tax

Manage compliance

Reporting

[Overview](https://docs.stripe.com/stripe-reports)

Select a report

Configure reports

Reports API

[Reports for multiple accounts](https://docs.stripe.com/reports/multiple-accounts)

Revenue recognition

Data

[Overview](https://docs.stripe.com/stripe-data) [Schema](https://docs.stripe.com/stripe-data/schema)

Custom reports

Data Pipeline

Data management

United States

English (United States)

[Home](https://docs.stripe.com/ "Home")[Revenue](https://docs.stripe.com/revenue "Revenue")Customer management

# Deep links in the customerportal

## Design streamlined customer flows with the customer portal API.

Ask about this page

Copy for LLM

View as Markdown

With the [customer portal](https://docs.stripe.com/customer-management), you can provide subscription and payment method management to your customers without building it yourself. If you want to streamline customer actions and further customize workflows between your own app and Stripe, you can create a customer portal [flow](https://docs.stripe.com/api/customer_portal/session#portal_session_object-flow).

## Customer portal flows ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)

A _flow_ is a customizable deep link into the customer portal. Portal flows allow you to:

1. Deep link directly to the page with the specified action for your customer to complete. Navigational components to access the rest of the customer portal are hidden so the customer can focus on the single action.
2. Customize the redirect behavior after the customer completes the action—redirect them immediately to your own URL, to a hosted confirmation page, or back to the portal homepage.
3. Personalize the flow with unique options like prefilled promotion codes or custom messages.

### Flow types![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)

A flow’s [type](https://docs.stripe.com/api/customer_portal/sessions/create#create_portal_session-flow_data-type) defines what single flow or action your customer will complete. Below are the currently available flow types:

| Flow type | Description | Example |
| --- | --- | --- |
| `payment_method_update` | Use `payment_method_update` to let your customer add a new payment method. The payment method is set as the `customer.invoice_settings.default_payment_method`. | ![Example of payment method update flow](https://b.stripecdn.com/docs-statics-srv/assets/payment_method_update.6f92b4642ce28020952f263360c83014.png)<br>Payment method update flow |
| `subscription_cancel` | Use `subscription_cancel` to let your customer cancel a specific subscription.<br>You can customize whether the subscription cancels immediately or at the end of the period by updating your portal configuration through the [API](https://docs.stripe.com/api/customer_portal/configuration#portal_configuration_object-features-subscription_cancel-mode) or the [Dashboard](https://dashboard.stripe.com/test/settings/billing/portal). | ![Example of subscription cancel flow](https://b.stripecdn.com/docs-statics-srv/assets/subscription_cancel.6943958d0358b97241a1f4d2703d3bfb.png)<br>Subscription cancel flow |
| `subscription_update` | Use `subscription_update` to let your customer select different update options such as upgrading or downgrading to another plan or updating the current plan quantity.<br>You can customize the available plans by updating your portal configuration through the [API](https://docs.stripe.com/api/customer_portal/configuration#portal_configuration_object-features-subscription_update-products) or the [Dashboard](https://dashboard.stripe.com/test/settings/billing/portal). | ![Example of subscription update flow](https://b.stripecdn.com/docs-statics-srv/assets/subscription_update.8426206cdf98ba10d04680b782644b67.png)<br>Subscription update flow |
| `subscription_update_confirm` | Use `subscription_update_confirm` to let your customer confirm a specific update to their subscription.<br>You can use this option when you have your own pricing page but want to offload the work of displaying update details such as upcoming invoice and prorations, handling payment failures, or handling [3D Secure authentication](https://docs.stripe.com/payments/3d-secure).<br>You can also specify a coupon or promotion code to apply on the subscription update. You could use this for promotional campaigns when you offer a discount for switching to another plan. | ![Example of subscription update confirm flow](https://b.stripecdn.com/docs-statics-srv/assets/subscription_update_confirm.5a06b658cc8a15971fdfae54fc7708da.png)<br>Subscription update confirm flow |

[**Create a flow  ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)**](https://docs.stripe.com/customer-management/portal-deep-links#create-a-flow)

#### Note

Customer portal flows are an extension to the [customer portal API](https://docs.stripe.com/api/customer_portal/sessions/create). First follow the general guide to [integrate the customer portal with the API](https://docs.stripe.com/customer-management/integrate-customer-portal) before using this guide.

To create a flow, specify [flow\_data](https://docs.stripe.com/api/customer_portal/sessions/create#create_portal_session-flow_data) when you create a portal session.

Set the [type](https://docs.stripe.com/api/customer_portal/sessions/create#create_portal_session-flow_data-type) of flow you want your customer to complete. Depending on the flow `type`, you might need to pass in additional data such as a subscription ID.

Below are examples on how to set up each flow type.

Payment method update

Subscription cancel

Subscription update

Subscription update confirm

Command Line

Select a language

Select a language

cURL

cURL

Stripe CLI

Ruby

Python

PHP

Java

Node.js

Go

.NET

```CodeBlock-code

```

The portal session `url` for the response now deep links into the flow you created. Use that URL to redirect customers to the portal flow from your site.

[**Customize after completion behavior  ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)**](https://docs.stripe.com/customer-management/portal-deep-links#customize-after-completion)

After your customer successfully completes the flow, they see a localized confirmation page that shows the details of their completed update. You can customize the confirmation message on this page, redirect to a URL of your choice, or redirect them back to the customer portal homepage where their full account details are visible.

To customize this behavior, set [after\_completion](https://docs.stripe.com/api/customer_portal/sessions/create#create_portal_session-flow_data-after_completion) on `flow_data`.

The following example lets your customer cancel their subscription, and redirect back to your own site afterwards:

Command Line

Select a language

Select a language

cURL

cURL

Stripe CLI

Ruby

Python

PHP

Java

Node.js

Go

.NET

```CodeBlock-code

```

#### Note

The top level `return_url` is a link back to your website that the customer can click at any time (if they decide not to cancel, for example). The `flow_data[after_completion][redirect][return_url]` is a link back to your website after a customer successfully cancels their subscription.

Was this page helpful?

YesNo

- Need help? [Contact Support](https://support.stripe.com/).
- Join our [early access program](https://insiders.stripe.dev/).
- Check out our [changelog](https://docs.stripe.com/changelog).
- Questions? [Contact Sales](https://stripe.com/contact/sales).
- LLM? [Read llms.txt](https://docs.stripe.com/llms.txt).
- Powered by [Markdoc](https://markdoc.dev/)

Sign up for developer updates:

Sign upYou can unsubscribe at any time. Read our [privacy policy](https://stripe.com/privacy).

On this page

[Customer portal flows](https://docs.stripe.com/customer-management/portal-deep-links#what-is-a-flow "Customer portal flows")

[Create a flow](https://docs.stripe.com/customer-management/portal-deep-links#create-a-flow "Create a flow")

[Customize after completion behavior](https://docs.stripe.com/customer-management/portal-deep-links#customize-after-completion "Customize after completion behavior")

Stripe Shell

Test mode

API Explorer

```CodeBlock

```

The Stripe Shell is best experienced on desktop.

```
$
```