hCaptcha

hCaptcha

Afrikaans

Albanian

Amharic

Arabic

Armenian

Azerbaijani

Basque

Belarusian

Bengali

Bulgarian

Bosnian

Burmese

Catalan

Cebuano

Chinese

Chinese Simplified

Chinese Traditional

Corsican

Croatian

Czech

Danish

Dutch

English

Esperanto

Estonian

Finnish

French

Frisian

Gaelic

Galacian

Georgian

German

Greek

Gujurati

Haitian

Hausa

Hawaiian

Hebrew

Hindi

Hmong

Hungarian

Icelandic

Igbo

Indonesian

Irish

Italian

Japanese

Javanese

Kannada

Kazakh

Khmer

Kinyarwanda

Kirghiz

Korean

Kurdish

Lao

Latin

Latvian

Lithuanian

Luxembourgish

Macedonian

Malagasy

Malay

Malayalam

Maltese

Maori

Marathi

Mongolian

Nepali

Norwegian

Nyanja

Oriya

Persian

Polish

Portuguese (Brazil)

Portuguese (Portugal)

Pashto

Punjabi

Romanian

Russian

Samoan

Shona

Sindhi

Sinhalese

Serbian

Slovak

Slovenian

Somali

Southern Sotho

Spanish

Sundanese

Swahili

Swedish

Tagalog

Tajik

Tamil

Tatar

Teluga

Thai

Turkish

Turkmen

Uyghur

Ukrainian

Urdu

Uzbek

Vietnamese

Welsh

Xhosa

Yiddish

Yoruba

Zulu

EN

[Visit hcaptcha.com to learn more about the service and its accessibility options.](https://www.hcaptcha.com/what-is-hcaptcha-about?ref=b.stripecdn.com&utm_campaign=5034f7f0-a742-48aa-89e2-062ece60f0d6&utm_medium=challenge&hl=en "Visit hcaptcha.com to learn more about the service and its accessibility options.")

Please try again. ⚠️

Verify

[Skip to content](https://docs.stripe.com/payments/checkout/build-subscriptions#main-content)

Build a subscriptions integration

[Create account](https://dashboard.stripe.com/register/billing) or [Sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fpayments%2Fcheckout%2Fbuild-subscriptions)

[The Stripe Docs logo](https://docs.stripe.com/)

Search

`/`Ask AI

[Create account](https://dashboard.stripe.com/register/billing)

[Sign in](https://dashboard.stripe.com/login?redirect=https%3A%2F%2Fdocs.stripe.com%2Fpayments%2Fcheckout%2Fbuild-subscriptions)

[Get started](https://docs.stripe.com/get-started)

[Payments](https://docs.stripe.com/payments)

[Revenue](https://docs.stripe.com/revenue)

[Platforms and marketplaces](https://docs.stripe.com/connect)

[Money management](https://docs.stripe.com/money-management)

[Developer resources](https://docs.stripe.com/development)

APIs & SDKs

Help

[Overview](https://docs.stripe.com/payments)

About Stripe payments

[Upgrade your integration](https://docs.stripe.com/payments/upgrades)

Payments analytics

Online payments

[Overview](https://docs.stripe.com/payments/online-payments) [Find your use case](https://docs.stripe.com/payments/use-cases/get-started) [Use Managed Payments](https://docs.stripe.com/payments/managed-payments)

Use Payment Links

Use a prebuilt checkout page

[Overview](https://docs.stripe.com/payments/checkout/build-integration)

Quickstarts

[Customize look and feel](https://docs.stripe.com/payments/checkout/customization)

[Collect additional information](https://docs.stripe.com/payments/checkout/collect-additional-info)

[Collect taxes](https://docs.stripe.com/payments/checkout/taxes)

[Dynamically update checkout](https://docs.stripe.com/payments/checkout/dynamic-updates)

[Manage your product catalog](https://docs.stripe.com/payments/checkout/product-catalog)

[Subscriptions](https://docs.stripe.com/payments/subscriptions)

Build a subscriptions integration

[Configure free trials](https://docs.stripe.com/payments/checkout/free-trials)

[Limit customers to one subscription](https://docs.stripe.com/payments/checkout/limit-subscriptions)

[Set billing cycle date](https://docs.stripe.com/payments/checkout/billing-cycle)

[Manage payment methods](https://docs.stripe.com/payments/checkout/payment-methods)

[Let customers pay in their local currency](https://docs.stripe.com/payments/checkout/localize-prices)

[Add discounts, upsells, and optional items](https://docs.stripe.com/payments/checkout/promotions)

[Set up future payments](https://docs.stripe.com/payments/checkout/save-and-reuse)

[Save payment details during payment](https://docs.stripe.com/payments/checkout/save-during-payment)

[After the payment](https://docs.stripe.com/payments/checkout/after-the-payment)

[Migrate from legacy Checkout](https://docs.stripe.com/payments/checkout/migration)

[Migrate Checkout to use Prices](https://docs.stripe.com/payments/checkout/migrating-prices)

Build a custom integration with Elements

Build an in-app integration

Payment methods

Add payment methods

Manage payment methods

Faster checkout with Link

Payment interfaces

Payment Links

Checkout

Web Elements

In-app Payments

Payment scenarios

Handle multiple currencies

Custom payment flows

Flexible acquiring

Orchestration

In-person payments

Terminal

Beyond payments

Incorporate your company

Crypto

Financial Connections

Climate

Understand fraud

Radar fraud protection

Manage disputes

Verify identities

United States

English (United States)

[Home](https://docs.stripe.com/ "Home")[Payments](https://docs.stripe.com/payments "Payments")Use a prebuilt checkout page[Subscriptions](https://docs.stripe.com/payments/subscriptions "Subscriptions")

# Build a subscriptions integration withCheckout

## Create and manage subscriptions to accept recurring payments with Checkout.

Ask about this page

Copy for LLM

View as Markdown

Stripe-hosted page

Embedded form

![Checkout subscription page](https://b.stripecdn.com/docs-statics-srv/assets/checkout-subs-preview.d409ee79bf1f3280b9dfd3968b314c21.png)

Low code

Customize logo, images, and colors.

Use prebuilt hosted pages to collect payments and manage your [subscriptions](https://docs.stripe.com/billing/subscriptions/creating).

Clone a sample integration [from GitHub](https://github.com/stripe-samples/checkout-single-subscription).

For an immersive version of this guide, see the [Billing integration quickstart](https://docs.stripe.com/billing/quickstart).

Explore the [sample on GitHub](https://github.com/stripe-samples/checkout-single-subscription) or the [demo](https://checkout.stripe.dev/).

## What you’ll build ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)

This guide describes how to sell fixed-price monthly subscriptions using [Stripe Checkout](https://docs.stripe.com/payments/checkout).

This guide shows you how to:

- Model your business by building a product catalog.
- Add a Checkout session to your site, including a button and success and cancellation pages.
- Monitor subscription events and provision access to your service.
- Set up the [customer portal](https://docs.stripe.com/customer-management).
- Add a customer portal session to your site, including a button and redirect.
- Let customers manage their subscription through the portal.
- Learn how to use [flexible billing mode](https://docs.stripe.com/billing/subscriptions/billing-mode) to access enhanced billing behavior and additional features.

After you complete the integration, you can extend it to:

- Display [taxes](https://docs.stripe.com/payments/checkout/taxes)
- Apply [discounts](https://docs.stripe.com/billing/subscriptions/coupons#using-coupons-in-checkout)
- Offer customers a [free trial period](https://docs.stripe.com/billing/subscriptions/trials)
- Add [payment methods](https://docs.stripe.com/payments/payment-methods/integration-options)
- Integrate the [hosted invoice page](https://docs.stripe.com/invoicing/hosted-invoice-page)
- Use Checkout in [setup mode](https://docs.stripe.com/payments/save-and-reuse)
- Set up [usage-based billing](https://docs.stripe.com/products-prices/pricing-models#usage-based-pricing), [pricing tiers](https://docs.stripe.com/products-prices/pricing-models#tiered-pricing), and [usage-based pricing](https://docs.stripe.com/products-prices/pricing-models#usage-based-pricing)
- Manage [prorations](https://docs.stripe.com/billing/subscriptions/prorations)
- Allow customers to [subscribe to multiple products](https://docs.stripe.com/billing/subscriptions/quantities#multiple-product-sub)
- Integrate [entitlements](https://docs.stripe.com/billing/entitlements) to manage access to your product’s features

[**Set up Stripe  ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)**](https://docs.stripe.com/payments/checkout/build-subscriptions#set-up-stripe)

Install the Stripe client of your choice:

Command Line

Select a language

Select a language

Ruby

Ruby

Python

PHP

Java

Node.js

Go

.NET

```CodeBlock-code

```

Gemfile

Select a language

Select a language

Ruby

Ruby

Python

PHP

Java

Node.js

Go

.NET

```CodeBlock-code

```

Optionally, install the Stripe CLI. The CLI provides [webhook](https://docs.stripe.com/webhooks#test-webhook) testing, and you can run it to create your products and prices.

Command Line

Select a language

Select a language

Install from source

Install from source

scoop

```CodeBlock-code

```

For additional install options, see [Get started with the Stripe CLI](https://docs.stripe.com/stripe-cli).

[**Create the pricing model   Dashboard or Stripe CLI   ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)**](https://docs.stripe.com/payments/checkout/build-subscriptions#create-pricing-model)

Create your [products](https://docs.stripe.com/api/products) and their [prices](https://docs.stripe.com/api/prices) in the Dashboard or with the Stripe CLI.

This example uses a fixed-price service with two different service-level options: Basic and Premium. For each service-level option, you need to create a product and a recurring price. (If you want to add a one-time charge for something like a setup fee, create a third product with a one-time price. To keep things simple, this example doesn’t include a one-time charge.)

In this example, each product bills at monthly intervals. The price for the Basic product is 5 USD. The price for the Premium product is 15 USD.

Dashboard

Stripe CLI

Go to the [Add a product](https://dashboard.stripe.com/test/products/create) page and create two products. Add one price for each product, each with a monthly recurring billing period:

- Premium product: Premium service with extra features

  - Price: Flat rate \| 15 USD
- Basic product: Basic service with minimum features

  - Price: Flat rate \| 5 USD

After you create the prices, record the price IDs so you can use them in other steps. Price IDs look like this: `price_G0FvDp6vZvdwRZ`.

When you’re ready, use the **Copy to live mode** button at the top right of the page to clone your product from [a sandbox to live mode](https://docs.stripe.com/keys#test-live-modes).

If you offer multiple billing periods, use Checkout to [upsell](https://docs.stripe.com/payments/checkout/upsells) customers on longer billing periods and collect more revenue upfront.

For other pricing models, see [Billing examples](https://docs.stripe.com/products-prices/pricing-models).

[**Create a Checkout Session   Client and Server   ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)**](https://docs.stripe.com/payments/checkout/build-subscriptions#create-session)

Add a checkout button to your website that calls a server-side endpoint to create a Checkout Session.

index.html

[View full sample](https://github.com/stripe-samples/checkout-single-subscription/blob/master/client/index.html "View full sample on GitHub")

```CodeBlock-code

```

On the backend of your application, define an endpoint that [creates the session](https://docs.stripe.com/api/checkout/sessions/create) for your frontend to call. You need these values:

- The price ID of the subscription the customer is signing up for (your frontend passes this value)
- Your `success_url`, which is a page on your website that Checkout returns your customer to after they complete the payment

You can optionally:

- Use `cancel_url` to provide a page on your website where Checkout returns your customer, if they cancel the payment process.
- Configure a [billing cycle anchor](https://docs.stripe.com/billing/subscriptions/billing-cycle) to your subscription in this call.
- Use [custom text](https://docs.stripe.com/payments/checkout/customization/policies?payment-ui=embedded-form#customize-payment-method-reuse-agreement-and-subscription-terms) to include your subscription and cancellation terms, and a link to where your customers can update or cancel their subscription. We recommend configuring [email reminders and notifications](https://docs.stripe.com/invoicing/send-email#email-configuration) for your subscribers.

If you created a one-time price in [step 2](https://docs.stripe.com/billing/subscriptions/build-subscriptions#create-pricing-model), pass that price ID as well. After creating a Checkout Session, redirect your customer to the [URL](https://docs.stripe.com/api/checkout/sessions/object#checkout_session_object-url) returned in the response.

You can enable more accurate and predictable subscription behavior when you create a Checkout Session by setting the [billing mode](https://docs.stripe.com/billing/subscriptions/billing-mode) type to `flexible`. You must use the Stripe API version [2025-06-30.basil](https://docs.stripe.com/changelog/basil#2025-06-30.basil) or later.

#### Note

You can use [lookup\_keys](https://docs.stripe.com/products-prices/manage-prices#lookup-keys) to fetch prices rather than price IDs. For an example, see the [sample application](https://github.com/stripe-samples/subscription-use-cases/tree/main/fixed-price-subscriptions).

server.rb

Select a language

Select a language

Ruby

Ruby

Python

PHP

Java

Node.js

Go

.NET

[View full sample](https://github.com/stripe-samples/checkout-single-subscription/blob/master/server/ruby/server.rb "View full sample on GitHub")

```CodeBlock-code

```

This example customizes the `success_url` by appending the session ID. Learn more about [customizing your success page](https://docs.stripe.com/payments/checkout/custom-success-page).

From your [Dashboard](https://dashboard.stripe.com/settings/payment_methods), enable the payment methods you want to accept from your customers. Checkout supports [several payment methods](https://docs.stripe.com/payments/payment-methods/payment-method-support#product-support).

[**Provision and monitor subscriptions   Server   ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)**](https://docs.stripe.com/payments/checkout/build-subscriptions#provision-and-monitor)

After the subscription signup succeeds, the customer returns to your website at the `success_url`, which initiates a `checkout.session.completed` [webhook](https://docs.stripe.com/webhooks). When you receive a `checkout.session.completed` event, use [entitlements](https://docs.stripe.com/billing/entitlements) to provision the subscription. Continue to provision each month (if billing monthly) as you receive `invoice.paid` events. If you receive an `invoice.payment_failed` event, notify your customer and send them to the customer portal to update their payment method.

To determine the next step for your system’s logic, check the event type and parse the payload of each [event object](https://docs.stripe.com/api/events/object), such as `invoice.paid`. Store the `subscription.id` and `customer.id` event objects in your database for verification.

For testing purposes, you can monitor events in the [Events tab](https://dashboard.stripe.com/workbench/events) of [Workbench](https://docs.stripe.com/workbench). For production, set up a webhook endpoint and subscribe to appropriate event types. If you don’t know your `STRIPE_WEBHOOK_SECRET` key, go to the destination details view of the [Webhooks tab](https://dashboard.stripe.com/workbench/webhooks) in Workbench to view it.

server.rb

Select a language

Select a language

Ruby

Ruby

Python

PHP

Java

Node.js

Go

.NET

[View full sample](https://github.com/stripe-samples/checkout-single-subscription/blob/master/server/ruby/server.rb "View full sample on GitHub")

```CodeBlock-code

```

The minimum event types to monitor:

| Event name | Description |
| --- | --- |
| `checkout.session.completed` | Sent when a customer successfully completes the Checkout Session, informing you of a new purchase. |
| `invoice.paid` | Sent each billing period when a payment succeeds. |
| `invoice.payment_failed` | Sent each billing period if there’s an issue with your customer’s payment method. |

For even more events to monitor, see [Subscription webhooks](https://docs.stripe.com/billing/subscriptions/webhooks).

[**Configure the customer portal   Dashboard   ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)**](https://docs.stripe.com/payments/checkout/build-subscriptions#configure-portal)

The [customer portal](https://docs.stripe.com/customer-management) lets your customers directly manage their existing subscriptions and invoices.

Use the [Dashboard](https://dashboard.stripe.com/test/settings/billing/portal) to configure the portal. At a minimum, make sure to [configure the portal](https://docs.stripe.com/customer-management) so that customers can update their payment methods.

[**Create a portal session   Server   ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)**](https://docs.stripe.com/payments/checkout/build-subscriptions#create-portal-session)

Define an endpoint that [creates the customer portal session](https://docs.stripe.com/api/customer_portal/sessions/create) for your frontend to call. The `CUSTOMER_ID` refers to the customer ID created by a Checkout Session that you saved while processing the `checkout.session.completed` event. You can also set a default redirect link for the portal in the Dashboard.

Pass an optional `return_url` value for the page on your site to redirect your customer to after they finish managing their subscription:

server.rb

Select a language

Select a language

Ruby

Ruby

Python

PHP

Java

Node.js

Go

.NET

[View full sample](https://github.com/stripe-samples/checkout-single-subscription/blob/master/server/ruby/server.rb "View full sample on GitHub")

```CodeBlock-code

```

[**Send customers to the customer portal   Client   ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)**](https://docs.stripe.com/payments/checkout/build-subscriptions#send-to-portal)

On your frontend, add a button to the page at the `success_url` that provides a link to the customer portal:

success.html

[View full sample](https://github.com/stripe-samples/checkout-single-subscription/blob/master/client/success.html "View full sample on GitHub")

```CodeBlock-code

```

After exiting the customer portal, the customer returns to your website at the `return_url`. Continue to [monitor events](https://docs.stripe.com/billing/subscriptions/webhooks) to track the status of the customer’s subscription.

If you configure the customer portal to allow actions such as canceling a subscription, [monitor additional events](https://docs.stripe.com/customer-management/integrate-customer-portal#webhooks).

[**Test your integration  ![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)**](https://docs.stripe.com/payments/checkout/build-subscriptions#test)

### Test payment methods![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)

Use the following table to test different payment methods and scenarios.

| Payment method | Scenario | How to test |
| --- | --- | --- |
| BECS Direct Debit | Your customer successfully pays with BECS Direct Debit. | Fill out the form using the account number `900123456` and BSB `000000`. The confirmed PaymentIntent initially transitions to `processing`, then transitions to the `succeeded` status three minutes later. |
| BECS Direct Debit | Your customer’s payment fails with an `account_closed` error code. | Fill out the form using the account number `111111113` and BSB `000000`. |
| Credit card | The card payment succeeds and doesn’t require authentication. | Fill out the credit card form using the credit card number `4242 4242 4242 4242` with any expiration, CVC, and postal code. |
| Credit card | The card payment requires [authentication](https://docs.stripe.com/strong-customer-authentication). | Fill out the credit card form using the credit card number `4000 0025 0000 3155` with any expiration, CVC, and postal code. |
| Credit card | The card is declined with a decline code like `insufficient_funds`. | Fill out the credit card form using the credit card number `4000 0000 0000 9995` with any expiration, CVC, and postal code. |
| SEPA Direct Debit | Your customer successfully pays with SEPA Direct Debit. | Fill out the form using the account number `AT321904300235473204`. The confirmed PaymentIntent initially transitions to processing, then transitions to the succeeded status three minutes later. |
| SEPA Direct Debit | Your customer’s PaymentIntent status transitions from `processing` to `requires_payment_method`. | Fill out the form using the account number `AT861904300235473202`. |

### Monitor events![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)

Set up webhooks to listen to subscription change events, such as upgrades and cancellations. You can view [subscription webhook events](https://docs.stripe.com/billing/subscriptions/webhooks) in the [Dashboard](https://dashboard.stripe.com/test/events) or with the [Stripe CLI](https://docs.stripe.com/webhooks#test-webhook).

Learn more about [testing your Billing integration](https://docs.stripe.com/billing/testing).

## See also![](https://b.stripecdn.com/docs-statics-srv/assets/fcc3a1c24df6fcffface6110ca4963de.svg)

- [Offer customers a free trial period](https://docs.stripe.com/billing/subscriptions/trials)
- [Apply discounts](https://docs.stripe.com/billing/subscriptions/coupons#using-coupons-in-checkout)
- [Manage prorations](https://docs.stripe.com/billing/subscriptions/prorations)
- [Integrate entitlements to manage access to your product’s features](https://docs.stripe.com/billing/entitlements)

Was this page helpful?

YesNo

- Need help? [Contact Support](https://support.stripe.com/).
- Join our [early access program](https://insiders.stripe.dev/).
- Check out our [changelog](https://docs.stripe.com/changelog).
- Questions? [Contact Sales](https://stripe.com/contact/sales).
- LLM? [Read llms.txt](https://docs.stripe.com/llms.txt).
- Powered by [Markdoc](https://markdoc.dev/)

Sign up for developer updates:

Sign upYou can unsubscribe at any time. Read our [privacy policy](https://stripe.com/privacy).

On this page

[What you’ll build](https://docs.stripe.com/payments/checkout/build-subscriptions#build "What you’ll build")

[Set up Stripe](https://docs.stripe.com/payments/checkout/build-subscriptions#set-up-stripe "Set up Stripe")

[Create the pricing model](https://docs.stripe.com/payments/checkout/build-subscriptions#create-pricing-model "Create the pricing model")

[Create a Checkout Session](https://docs.stripe.com/payments/checkout/build-subscriptions#create-session "Create a Checkout Session")

[Provision and monitor subscriptions](https://docs.stripe.com/payments/checkout/build-subscriptions#provision-and-monitor "Provision and monitor subscriptions")

[Configure the customer portal](https://docs.stripe.com/payments/checkout/build-subscriptions#configure-portal "Configure the customer portal")

[Create a portal session](https://docs.stripe.com/payments/checkout/build-subscriptions#create-portal-session "Create a portal session")

[Send customers to the customer portal](https://docs.stripe.com/payments/checkout/build-subscriptions#send-to-portal "Send customers to the customer portal")

[Test your integration](https://docs.stripe.com/payments/checkout/build-subscriptions#test "Test your integration")

[Test payment methods](https://docs.stripe.com/payments/checkout/build-subscriptions#test-payment-methods "Test payment methods")

[Monitor events](https://docs.stripe.com/payments/checkout/build-subscriptions#monitor-events "Monitor events")

[See also](https://docs.stripe.com/payments/checkout/build-subscriptions#see-also "See also")

Stripe Shell

Test mode

API Explorer

```CodeBlock

```

The Stripe Shell is best experienced on desktop.

```
$
```